# 概览

三菱 CNC 驱动通过 TCP/IP 协议访问三菱 M70，M80 系列机床和加工中心，可以实时采集多种 CNC 运行数据，包括程序名，主轴转速，主轴倍率，主轴负载，急停等。

## 设备设置

| 字段 | 说明                |
| ---- | ------------------- |
| host | 设备 IP 地址        |
| port | 设备端口号, 默认683 |

## 支持的数据类型

* uint16
* int16
* uint32
* int32
* bit
* string

## CNC 数据

| tag 标识（地址） | 说明             | 数据类型 | 参数 |
| ---------------- | ---------------- | -------- | ---- |
| ProgramMain      | 加工主程序号     | string   | -    |
| FeedSpeedFA      | F 指令进给速度   | double   | -    |
| FeedSpeedFM      | 手动有效进给速度 | double   | -    |
| FeedSpeedFS      | 同步进给速度     | double   | -    |
| FeedSpeedFC      | 自动有效进给速度 | double   | -    |
| FeedSpeedFE      | 攻丝进给速度     | double   | -    |


*CNC 地址示例*

| 地址        | 说明             |
| ----------- | ---------------- |
| ProgramMain | 读取加工主程序号 |


### PLC 数据

| 标识 | 说明       | 类型            | 权限 |
| ---- | ---------- | --------------- | ---- |
| X    | 输入信号   | bit/16bit/32bit | 读写 |
| Y    | 输出信号   | bit/16bit/32bit | 读写 |
| R    | 文件寄存器 | 16bit/32bit     | 读写 |

*PLC 常用点位*

| 地址   | 类型   | 说明                                                                                                                                                                                      |
| ------ | ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| R69    | uint16 | PLC R 区域，地址69的数据，其值为EMG急停标志（65519 ON 65535 OFF）                                                                                                                         |
| R2500  | uint16 | PLC R 区域，地址2500的数据，其值为进给倍率                                                                                                                                                |
| R7008  | uint16 | PLC R 区域，地址7008的数据，其值为主轴倍率                                                                                                                                                |
| R6506  | uint32 | PLC R 区域，地址6506的数据，其值为主轴实际旋转转速                                                                                                                                        |
| R7000  | uint32 | PLC R 区域，地址7000~7001的数据，其值为指令设定主轴转速                                                                                                                                   |
| R6525  | uint16 | PLC R 区域，地址6525的数据，其值为主轴负载                                                                                                                                                |
| R6529  | uint16 | PLC R 区域，地址6529的数据，其值为主轴报警编号                                                                                                                                            |
| R606   | uint32 | PLC R 区域，地址606 ~ 607 的数据，其值为工件加工数当前值                                                                                                                                  |
| R608   | uint32 | PLC R 区域，地址608 ~ 609 的数据，其值为工件加工数最大值                                                                                                                                  |
| R11824 | uint32 | PLC R 区域，地址11824 ~ 11825 的数据，其值为使用中刀具组号                                                                                                                                |
| R11826 | uint32 | PLC R 区域，地址11826 ~ 11827 的数据，其值为使用中刀具刀号号                                                                                                                              |
| R11830 | uint32 | PLC R 区域，地址11830 ~ 11831 的数据，其值为使用中刀具使用累计时间数据                                                                                                                    |
| R11832 | uint32 | PLC R 区域，地址11832 ~ 11833 的数据，其值为 使用中刀具寿命设定时间数据                                                                                                                   |
| XC00   | uint16 | PLC X 区域，地址 C00 ~ C0F 的数据，其值为控制模式（1 JOG 模式中 2 手轮模式中 4 增量模式中 8 手动任意进给模式中 16 参考点返回模式中 32 自动初始设定模式中 256 内存模式中 2048 MDI 模式中） |
| XC12   | bit    | PLC X 区域，地址 C12 的数据，其值为自动运行中                                                                                                                                             |
| XC13   | bit    | PLC X 区域，地址 C13 的数据，其值为自动运行启动中                                                                                                                                         |
| XC14   | bit    | PLC X 区域，地址 C14 的数据，其值为自动运行暂停中                                                                                                                                         |
| XC15   | bit    | PLC X 区域，地址 C15 的数据，其值为复位中                                                                                                                                                 |
| XC20   | bit    | PLC X 区域，地址 C20 的数据，其值为快速进给中                                                                                                                                             |
| XC21   | bit    | PLC X 区域，地址 C21 的数据，其值为切削进给中                                                                                                                                             |
| XC22   | bit    | PLC X 区域，地址 C22 的数据，其值为攻丝中                                                                                                                                                 |
| XC23   | bit    | PLC X 区域，地址 C23 的数据，其值为螺纹切削中                                                                                                                                             |
| XC24   | bit    | PLC X 区域，地址 C24 的数据，其值为同步进给中                                                                                                                                             |
| XC25   | bit    | PLC X 区域，地址 C25 的数据，其值为恒速中                                                                                                                                                 |
| XC26   | bit    | PLC X 区域，地址 C26 的数据，其值为跳跃中                                                                                                                                                 |
| XC27   | bit    | PLC X 区域，地址 C27 的数据，其值为参考点返回中                                                                                                                                           |

::: tip
PLC 数据表可以查看三菱官网提供的《PLC开发说明书-M800/M80/E80系列》，获取更多系统运行数据。
:::
